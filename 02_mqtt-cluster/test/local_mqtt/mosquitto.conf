# Basic MQTT configuration
persistence true
persistence_location /mosquitto/data/
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout
per_listener_settings true

# Access Control List
acl_file /mosquitto/config/acl

# Listener 1: MQTT, unencrypted, unauthenticated
listener 1883 0.0.0.0
protocol mqtt
allow_anonymous true

# Listener 2: MQTT, unencrypted, authenticated
listener 1884 0.0.0.0
protocol mqtt
allow_anonymous false
password_file /mosquitto/config/passwd

# Listener 3: MQTT, encrypted, unauthenticated
listener 8883 0.0.0.0
protocol mqtt
allow_anonymous true
cafile /mosquitto/certs/ca/ca.crt
certfile /mosquitto/certs/server/server.crt
keyfile /mosquitto/certs/server/server.key

# Listener 4: MQTT, encrypted, client certificate required
listener 8884 0.0.0.0
protocol mqtt
allow_anonymous false
password_file /mosquitto/config/passwd
cafile /mosquitto/certs/ca/ca.crt
certfile /mosquitto/certs/server/server.crt
keyfile /mosquitto/certs/server/server.key
require_certificate true
use_identity_as_username true

# Listener 5: MQTT, encrypted, authenticated
listener 8885 0.0.0.0
protocol mqtt
allow_anonymous false
password_file /mosquitto/config/passwd
cafile /mosquitto/certs/ca/ca.crt
certfile /mosquitto/certs/server/server.crt
keyfile /mosquitto/certs/server/server.key

# Listener 6: MQTT, encrypted, unauthenticated (different port for testing)
listener 8886 0.0.0.0
protocol mqtt
allow_anonymous true
cafile /mosquitto/certs/ca/ca.crt
certfile /mosquitto/certs/server/server.crt
keyfile /mosquitto/certs/server/server.key

# Listener 7: MQTT over WebSockets, unencrypted, unauthenticated
listener 8080 0.0.0.0
protocol websockets
allow_anonymous true


# Listener 8: MQTT over WebSockets, encrypted, unauthenticated
listener 8081 0.0.0.0
protocol websockets
allow_anonymous true
cafile /mosquitto/certs/ca/ca.crt
certfile /mosquitto/certs/server/server.crt
keyfile /mosquitto/certs/server/server.key

# Listener 9: MQTT over WebSockets, unencrypted, authenticated
listener 8090 0.0.0.0
protocol websockets
allow_anonymous false
password_file /mosquitto/config/passwd


# Listener 10: MQTT over WebSockets, encrypted, authenticated
listener 8091 0.0.0.0
protocol websockets
allow_anonymous false
password_file /mosquitto/config/passwd
cafile /mosquitto/certs/ca/ca.crt
certfile /mosquitto/certs/server/server.crt
keyfile /mosquitto/certs/server/server.key

